
// Auto-generated file. Do not edit manually.
// This file contains the base64 encoded HTML for the Unified Editor.
// This avoids issues with template literal backticks and Cloudflare build process import restrictions.

export const unifiedEditorHtmlBase64 = "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+RGlnaXRhbCBUd2luIFN0dWRpbyAtIERpYWdQVjwvdGl0bGU+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4udGFpbHdpbmRjc3MuY29tIj48L3NjcmlwdD4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuNC4wL2Nzcy9hbGwubWluLmNzcyI+CiAgICA8IS0tIExlYWZsZXQgQ1NTIC0tPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3VucGtnLmNvbS9sZWFmbGV0QDEuOS40L2Rpc3QvbGVhZmxldC5jc3MiIC8+CiAgICA8c3R5bGU+CiAgICAgICAgYm9keSwgaHRtbCB7IGhlaWdodDogMTAwJTsgb3ZlcmZsb3c6IGhpZGRlbjsgfQogICAgICAgIC5jYW52YXMtZ3JpZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IAogICAgICAgICAgICAgICAgbGluZWFyLWdyYWRpZW50KCNlNWU3ZWIgMXB4LCB0cmFuc3BhcmVudCAxcHgpLAogICAgICAgICAgICAgICAgbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjZTVlN2ViIDFweCwgdHJhbnNwYXJlbnQgMXB4KTsKICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiAyMHB4IDIwcHg7CiAgICAgICAgfQogICAgICAgIC5pbnNwZWN0b3ItcGFuZWwgewogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zcyBlYXNlLWluLW91dDsKICAgICAgICB9CiAgICAgICAgLmluc3BlY3Rvci1wYW5lbC5jbG9zZWQgewogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMTAwJSk7CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keSBjbGFzcz0iYmctZ3JheS0xMDAgZmxleCBmbGV4LWNvbCBoLWZ1bGwgdGV4dC1zbGF0ZS04MDAiPgoKICAgIDwhLS0gMS4gVE9QIEJBUiAoQ29tbWFuZCBDZW50ZXIpIC0tPgogICAgPGhlYWRlciBjbGFzcz0iYmctd2hpdGUgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwIGgtMTYgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHB4LTYgei0yMCBzaGFkb3ctc20iPgogICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtNCI+CiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iaGlzdG9yeS5iYWNrKCkiIGNsYXNzPSJ0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtZ3JheS04MDAiPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1hcnJvdy1sZWZ0Ij48L2k+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGgxIGNsYXNzPSJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LWdyYXktODAwIj5EaWdpdGFsIFR3aW4gU3R1ZGlvPC9oMT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIHRleHQteHMgdGV4dC1ncmF5LTUwMCBzcGFjZS14LTIiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJwbGFudE5hbWUiPkNlbnRyYWxlIEluY29ubnVlPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtY2hldnJvbi1yaWdodCB0ZXh0LVsxMHB4XSI+PC9pPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Im1pc3Npb25TZWxlY3RvciIgb25jaGFuZ2U9InVwZGF0ZU1pc3Npb25Db250ZXh0KCkiIGNsYXNzPSJiZy10cmFuc3BhcmVudCBib3JkZXItbm9uZSBmb250LWJvbGQgdGV4dC1wdXJwbGUtNzAwIGZvY3VzOnJpbmctMCBjdXJzb3ItcG9pbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImFsbCI+TWlzc2lvbiBDb21wbMOodGUgKEVMICsgSVYgKyBWaXN1ZWwpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImVsIj5BdWRpdCDDiWxlY3Ryb2x1bWluZXNjZW5jZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ2aXN1YWwiPkF1ZGl0IFZpc3VlbCAvIERyb25lPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Iml2Ij5BdWRpdCBDb3VyYmVzIEktVjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIFZpZXcgU3dpdGNoZXIgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBiZy1ncmF5LTEwMCBwLTEgcm91bmRlZC1sZyI+CiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ic3dpdGNoVmlldygnbWFwJykiIGlkPSJidG5WaWV3TWFwIiBjbGFzcz0icHgtNCBweS0xLjUgcm91bmRlZC1tZCB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24tY29sb3JzIGJnLXdoaXRlIHNoYWRvdy1zbSB0ZXh0LXB1cnBsZS03MDAiPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1zYXRlbGxpdGUgbXItMiI+PC9pPlNhdGVsbGl0ZQogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzd2l0Y2hWaWV3KCdzY2hlbWF0aWMnKSIgaWQ9ImJ0blZpZXdTY2hlbWF0aWMiIGNsYXNzPSJweC00IHB5LTEuNSByb3VuZGVkLW1kIHRleHQtc20gZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1jb2xvcnMgdGV4dC1ncmF5LTYwMCBob3Zlcjp0ZXh0LWdyYXktOTAwIj4KICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtcHJvamVjdC1kaWFncmFtIG1yLTIiPjwvaT5TY2jDqW1hdGlxdWUKICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyI+CiAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bkF1dG9QbGFjZSIgb25jbGljaz0iYXV0b1BsYWNlTW9kdWxlcygpIiBjbGFzcz0iaGlkZGVuIGJnLXllbGxvdy01MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy15ZWxsb3ctNjAwIHB4LTMgcHktMiByb3VuZGVkLWxnIHRleHQtc20gZm9udC1ib2xkIHNoYWRvdy1tZCB0cmFuc2l0aW9uLWNvbG9ycyBhbmltYXRlLXB1bHNlIj4KICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtbWFnaWMgbXItMiI+PC9pPlBsYWNlciBNb2R1bGVzCiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8ZGl2IGlkPSJzeW5jU3RhdHVzIiBjbGFzcz0idGV4dC14cyB0ZXh0LWdyYXktNDAwIGhpZGRlbiI+CiAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWNoZWNrIG1yLTEiPjwvaT5TYXV2ZWdhcmTDqQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzeW5jRnVsbCgpIiBjbGFzcz0iYmctcHVycGxlLTEwMCB0ZXh0LXB1cnBsZS03MDAgaG92ZXI6YmctcHVycGxlLTIwMCBweC0zIHB5LTIgcm91bmRlZC1sZyB0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdHJhbnNpdGlvbi1jb2xvcnMiPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1zeW5jLWFsdCBtci0yIj48L2k+U3luYyBNdWx0aS1Nb2R1bGVzCiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InNhdmVDaGFuZ2VzKCkiIGNsYXNzPSJiZy1wdXJwbGUtNjAwIHRleHQtd2hpdGUgaG92ZXI6YmctcHVycGxlLTcwMCBweC00IHB5LTIgcm91bmRlZC1sZyB0ZXh0LXNtIGZvbnQtYm9sZCBzaGFkb3ctbWQgdHJhbnNpdGlvbi1jb2xvcnMiPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1zYXZlIG1yLTIiPjwvaT5TYXV2ZWdhcmRlcgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgIDwvaGVhZGVyPgoKICAgIDwhLS0gMi4gTUFJTiBXT1JLU1BBQ0UgLS0+CiAgICA8ZGl2IGNsYXNzPSJmbGV4LTEgZmxleCBvdmVyZmxvdy1oaWRkZW4gcmVsYXRpdmUiPgogICAgICAgIAogICAgICAgIDwhLS0gTEVGVDogTW9kdWxlIExpc3QgKENvbGxhcHNpYmxlKSAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJ3LTY0IGJnLXdoaXRlIGJvcmRlci1yIGJvcmRlci1ncmF5LTIwMCBmbGV4IGZsZXgtY29sIHotMTAiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLTQgYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iUmVjaGVyY2hlciBtb2R1bGUuLi4iIGNsYXNzPSJ3LWZ1bGwgcHgtMyBweS0yIGJnLWdyYXktNTAgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLW1kIHRleHQtc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1wdXJwbGUtNTAwIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8IS0tIEFsZXJ0IGZvciB1bnBsYWNlZCBtb2R1bGVzIC0tPgogICAgICAgICAgICA8ZGl2IGlkPSJ1bnBsYWNlZEFsZXJ0IiBjbGFzcz0iaGlkZGVuIGJnLXllbGxvdy01MCBib3JkZXItYiBib3JkZXIteWVsbG93LTEwMCBwLTIgdGV4dC14cyB0ZXh0LXllbGxvdy04MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIj4KICAgICAgICAgICAgICAgIDxzcGFuPuKaoO+4jyA8c3BhbiBpZD0idW5wbGFjZWRDb3VudCI+MDwvc3Bhbj4gbW9kdWxlcyBzYW5zIEdQUzwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iYXV0b1BsYWNlTW9kdWxlcygpIiBjbGFzcz0idW5kZXJsaW5lIGZvbnQtYm9sZCI+UGxhY2VyPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTIgc3BhY2UteS0xIiBpZD0ibW9kdWxlTGlzdCI+CiAgICAgICAgICAgICAgICA8IS0tIE1vZHVsZXMgaW5qZWN0ZWQgaGVyZSAtLT4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtMyBib3JkZXItdCBib3JkZXItZ3JheS0xMDAgYmctZ3JheS01MCB0ZXh0LXhzIHRleHQtY2VudGVyIHRleHQtZ3JheS00MDAiPgogICAgICAgICAgICAgICAgPHNwYW4gaWQ9InRvdGFsTW9kdWxlcyI+MDwvc3Bhbj4gbW9kdWxlcyDigKIgPHNwYW4gaWQ9InRvdGFsU3RyaW5ncyI+MDwvc3Bhbj4gc3RyaW5ncwogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBDRU5URVI6IENhbnZhcyAvIE1hcCAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEgcmVsYXRpdmUgYmctZ3JheS01MCI+CiAgICAgICAgICAgIAogICAgICAgICAgICA8IS0tIE1hcCBWaWV3IC0tPgogICAgICAgICAgICA8ZGl2IGlkPSJtYXBDb250YWluZXIiIGNsYXNzPSJhYnNvbHV0ZSBpbnNldC0wIHotMCI+PC9kaXY+CgogICAgICAgICAgICA8IS0tIFNjaGVtYXRpYyBWaWV3IChIaWRkZW4gYnkgZGVmYXVsdCkgLS0+CiAgICAgICAgICAgIDxkaXYgaWQ9InNjaGVtYXRpY0NvbnRhaW5lciIgY2xhc3M9ImFic29sdXRlIGluc2V0LTAgei0wIGhpZGRlbiBjYW52YXMtZ3JpZCBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgPGNhbnZhcyBpZD0ic2NoZW1hdGljQ2FudmFzIj48L2NhbnZhcz4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8IS0tIExvYWRpbmcgT3ZlcmxheSAtLT4KICAgICAgICAgICAgPGRpdiBpZD0ibG9hZGluZ092ZXJsYXkiIGNsYXNzPSJhYnNvbHV0ZSBpbnNldC0wIGJnLXdoaXRlLzgwIGJhY2tkcm9wLWJsdXItc20gei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTEyIHctMTIgYm9yZGVyLWItMiBib3JkZXItcHVycGxlLTYwMCBteC1hdXRvIG1iLTQiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LWdyYXktNTAwIGZvbnQtbWVkaXVtIj5DaGFyZ2VtZW50IGR1IEp1bWVhdSBOdW3DqXJpcXVlLi4uPC9wPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIFJJR0hUOiBJTlNQRUNUT1IgKFRoZSAiTGF0ZXJhbCBJbnNwZWN0b3IiKSAtLT4KICAgICAgICA8ZGl2IGlkPSJpbnNwZWN0b3JQYW5lbCIgY2xhc3M9InctODAgYmctd2hpdGUgYm9yZGVyLWwgYm9yZGVyLWdyYXktMjAwIHNoYWRvdy14bCB6LTIwIGZsZXggZmxleC1jb2wgaW5zcGVjdG9yLXBhbmVsIGNsb3NlZCBhYnNvbHV0ZSByaWdodC0wIHRvcC0wIGJvdHRvbS0wIGgtZnVsbCI+CiAgICAgICAgICAgIDwhLS0gSGVhZGVyIC0tPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJoLTE2IGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcHgtNiBiZy1ncmF5LTUwIj4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJmb250LWJvbGQgdGV4dC1sZyB0ZXh0LWdyYXktODAwIiBpZD0iaW5zcE1vZHVsZUlkIj4tLTwvaDI+CiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQteHMgdGV4dC1ncmF5LTUwMCIgaWQ9Imluc3BTdHJpbmdJZCI+U8OpbGVjdGlvbm5leiB1biBtb2R1bGU8L3A+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iY2xvc2VJbnNwZWN0b3IoKSIgY2xhc3M9InRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1ncmF5LTYwMCI+CiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS10aW1lcyI+PC9pPgogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPCEtLSBUYWJzIC0tPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InN3aXRjaFRhYignZWwnKSIgY2xhc3M9ImZsZXgtMSBweS0zIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1wdXJwbGUtNjAwIGJvcmRlci1iLTIgYm9yZGVyLXB1cnBsZS02MDAgYWN0aXZlLXRhYiI+RUw8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ic3dpdGNoVGFiKCd2aXN1YWwnKSIgY2xhc3M9ImZsZXgtMSBweS0zIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LWdyYXktNzAwIj5WaXN1ZWw8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ic3dpdGNoVGFiKCdpdicpIiBjbGFzcz0iZmxleC0xIHB5LTMgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtZ3JheS03MDAiPkktVjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2luZm8nKSIgY2xhc3M9ImZsZXgtMSBweS0zIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LWdyYXktNzAwIj5JbmZvczwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDwhLS0gQ29udGVudCAtLT4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTYgc3BhY2UteS02Ij4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPCEtLSBUQUI6IEVMIEF1ZGl0IC0tPgogICAgICAgICAgICAgICAgPGRpdiBpZD0idGFiLWVsIiBjbGFzcz0ic3BhY2UteS00Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhc3BlY3Qtc3F1YXJlIGJnLWdyYXktOTAwIHJvdW5kZWQtbGcgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlIGdyb3VwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBpZD0iaW5zcEVMSW1hZ2UiIHNyYz0iIiBjbGFzcz0idy1mdWxsIGgtZnVsbCBvYmplY3QtY29udGFpbiBoaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJpbnNwRUxQbGFjZWhvbGRlciIgY2xhc3M9InctZnVsbCBoLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1ncmF5LTUwMCBmbGV4LWNvbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWNhbWVyYS1yZXRybyB0ZXh0LTN4bCBtYi0yIj48L2k+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC14cyI+UGFzIGQnaW1hZ2UgRUw8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhYnNvbHV0ZSBib3R0b20tMiByaWdodC0yIGJnLWJsYWNrLzcwIHRleHQtd2hpdGUgdGV4dC14cyBweC0yIHB5LTEgcm91bmRlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFTAogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgbWItMiI+U3RhdHV0IMOJbGVjdHJvbHVtaW5lc2NlbmNlPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcEVMU3RhdHVzIiBvbmNoYW5nZT0idXBkYXRlTW9kdWxlU3RhdHVzKCdlbCcpIiBjbGFzcz0idy1mdWxsIGJnLXdoaXRlIGJvcmRlciBib3JkZXItZ3JheS0zMDAgdGV4dC1ncmF5LTcwMCBweS0yIHB4LTMgcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctcHVycGxlLTUwMCBmb2N1czpib3JkZXItdHJhbnNwYXJlbnQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ib2siPvCfn6IgT0sgKEludGFjdCk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im1pY3JvY3JhY2tzIj7wn5+gIE1pY3JvZmlzc3VyZXM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InBpZCI+8J+foCBQSUQgKETDqWdyYWRhdGlvbik8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRlYWRfY2VsbCI+8J+UtCBDZWxsdWxlIE1vcnRlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJob3RzcG90Ij7wn5S0IEhvdHNwb3Q8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImJ5cGFzc19kaW9kZSI+8J+UtCBEaW9kZSBCeXBhc3M8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InN0cmluZ19vcGVuIj7imqsgU3RyaW5nIE91dmVydDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDwhLS0gVEFCOiBWaXN1YWwgLS0+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ0YWItdmlzdWFsIiBjbGFzcz0ic3BhY2UteS00IGhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgbWItMiI+w4l0YXQgVmlzdWVsPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iaW5zcFZpc3VhbFN0YXR1cyIgb25jaGFuZ2U9InVwZGF0ZU1vZHVsZVN0YXR1cygndmlzdWFsJykiIGNsYXNzPSJ3LWZ1bGwgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCB0ZXh0LWdyYXktNzAwIHB5LTIgcHgtMyByb3VuZGVkLW1kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Im9rIj7wn5+iIFJBUzwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGlydHkiPvCfn6AgU2FsZSAvIFNvaWxpbmc8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InZlZ2V0YXRpb24iPvCfn6AgT21icmFnZSBWw6lnw6l0YXRpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImJyZWFrYWdlIj7wn5S0IENhc3NlIC8gSW1wYWN0PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkZWxhbWluYXRpb24iPvCflLQgRMOpbGFtaW5hdGlvbjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDwhLS0gVEFCOiBJViAtLT4KICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ0YWItaXYiIGNsYXNzPSJzcGFjZS15LTQgaGlkZGVuIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwLTQgYmctYmx1ZS01MCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItYmx1ZS0yMDAiPgogICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWJsdWUtODAwIHRleHQtc20gbWItMSI+PGkgY2xhc3M9ImZhcyBmYS1ib2x0IG1yLTIiPjwvaT5BdWRpdCBJLVY8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC14cyB0ZXh0LWJsdWUtNzAwIj5NZXN1cmVzIMOpbGVjdHJpcXVlcy48L3A+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIG1iLTIiPsOJdGF0IEktVjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9Imluc3BJVlN0YXR1cyIgb25jaGFuZ2U9InVwZGF0ZU1vZHVsZVN0YXR1cygnaXYnKSIgY2xhc3M9InctZnVsbCBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHRleHQtZ3JheS03MDAgcHktMiBweC0zIHJvdW5kZWQtbWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ib2siPvCfn6IgTm9ybWFsPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJtZWFzdXJlZCI+8J+UtSBNZXN1csOpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsb3dfcG93ZXIiPvCfn6AgU291cy1wZXJmb3JtYW5jZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDwhLS0gVEFCOiBJbmZvcyAtLT4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InRhYi1pbmZvIiBjbGFzcz0ic3BhY2UteS00IGhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMiBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+TGF0aXR1ZGU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1tb25vIHRleHQtc20iIGlkPSJpbnNwTGF0Ij4tPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiPkxvbmdpdHVkZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LW1vbm8gdGV4dC1zbSIgaWQ9Imluc3BMb24iPi08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InRleHQteHMgdGV4dC1ncmF5LTQwMCI+U3RyaW5nPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJpbnNwU3RyaW5nSW5wdXQiIGNsYXNzPSJ3LWZ1bGwgYm9yZGVyIHJvdW5kZWQgcHgtMiBweS0xIHRleHQtc20iPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0idGV4dC14cyB0ZXh0LWdyYXktNDAwIj5Qb3NpdGlvbjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5zcFBvc0lucHV0IiBjbGFzcz0idy1mdWxsIGJvcmRlciByb3VuZGVkIHB4LTIgcHktMSB0ZXh0LXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPCEtLSBGb290ZXIgLS0+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNCBib3JkZXItdCBib3JkZXItZ3JheS0yMDAgYmctZ3JheS01MCI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InNhdmVJbnNwZWN0b3IoKSIgY2xhc3M9InctZnVsbCBiZy1wdXJwbGUtNjAwIHRleHQtd2hpdGUgcHktMiByb3VuZGVkLW1kIGZvbnQtc2VtaWJvbGQgaG92ZXI6YmctcHVycGxlLTcwMCB0cmFuc2l0aW9uIj4KICAgICAgICAgICAgICAgICAgICBBcHBsaXF1ZXIgbGVzIG1vZGlmaWNhdGlvbnMKICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICA8L2Rpdj4KCiAgICA8IS0tIFNjcmlwdHMgLS0+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly91bnBrZy5jb20vbGVhZmxldEAxLjkuNC9kaXN0L2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdD4KICAgICAgICAvLyAtLS0gR0xPQkFMIFNUQVRFIC0tLQogICAgICAgIGNvbnN0IFpPTkVfSUQgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKS5wb3AoKTsKICAgICAgICBsZXQgTU9EVUxFUyA9IFtdOyAvLyBUaGUgU2luZ2xlIFNvdXJjZSBvZiBUcnV0aAogICAgICAgIGxldCBWSUVXX01PREUgPSAnbWFwJzsgLy8gJ21hcCcgb3IgJ3NjaGVtYXRpYycKICAgICAgICBsZXQgU0VMRUNURURfTU9EVUxFX0lEID0gbnVsbDsKICAgICAgICBsZXQgbWFwID0gbnVsbDsKICAgICAgICBsZXQgbWFwTWFya2VycyA9IHt9OyAvLyBpZCAtPiBMLnJlY3RhbmdsZQogICAgICAgIAogICAgICAgIC8vIC0tLSBJTklUSUFMSVpBVElPTiAtLS0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgYXN5bmMgKCkgPT4gewogICAgICAgICAgICBhd2FpdCBpbml0TWFwKCk7CiAgICAgICAgICAgIGF3YWl0IGxvYWRUb3BvbG9neSgpOwogICAgICAgIH0pOwoKICAgICAgICAvLyAtLS0gQVBJIENBTExTIC0tLQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRUb3BvbG9neSgpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdPdmVybGF5JykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2FwaS91bmlmaWVkL3RvcG9sb2d5LyR7Wk9ORV9JRH1gKTsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpOwogICAgICAgICAgICAgICAgaWYoZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgTU9EVUxFUyA9IGRhdGEubW9kdWxlczsKICAgICAgICAgICAgICAgICAgICByZW5kZXJNb2R1bGVMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgcmVuZGVyTWFwTW9kdWxlcygpOwogICAgICAgICAgICAgICAgICAgIC8vIHJlbmRlclNjaGVtYXRpY01vZHVsZXMoKTsgLy8gVE9ETwogICAgICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXRzKCk7CiAgICAgICAgICAgICAgICAgICAgY2hlY2tVbnBsYWNlZE1vZHVsZXMoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0VycmV1ciBjaGFyZ2VtZW50OiAnICsgZGF0YS5lcnJvcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCdFcnJldXIgcsOpc2VhdScpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdPdmVybGF5JykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNoZWNrVW5wbGFjZWRNb2R1bGVzKCkgewogICAgICAgICAgICBjb25zdCB1bnBsYWNlZCA9IE1PRFVMRVMuZmlsdGVyKG0gPT4gIW0uZ2VvX2xhdCB8fCAhbS5nZW9fbG9uKTsKICAgICAgICAgICAgY29uc3QgY291bnQgPSB1bnBsYWNlZC5sZW5ndGg7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1bnBsYWNlZENvdW50JykuaW5uZXJUZXh0ID0gY291bnQ7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZihjb3VudCA+IDApIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1bnBsYWNlZEFsZXJ0JykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuQXV0b1BsYWNlJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndW5wbGFjZWRBbGVydCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bkF1dG9QbGFjZScpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBhc3luYyBmdW5jdGlvbiBzeW5jRnVsbCgpIHsKICAgICAgICAgICAgaWYoIWNvbmZpcm0oIkxhbmNlciBsYSBzeW5jaHJvbmlzYXRpb24gbXVsdGktbW9kdWxlcyAoRUwgKyBWaXN1YWwgKyBJVikgPyIpKSByZXR1cm47CiAgICAgICAgICAgIAogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYC9hcGkvdW5pZmllZC90b3BvbG9neS8ke1pPTkVfSUR9L3N5bmMtZnVsbGAsIHsgbWV0aG9kOiAnUE9TVCcgfSk7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsKICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGAke2RhdGEudG90YWxfc3luY2VkX3RvcG9sb2d5fSBtb2R1bGVzIHN5bmNocm9uaXPDqXMgIVxuTG9nczpcbiR7ZGF0YS5sb2dzLmpvaW4oJ1xuJyl9YCk7CiAgICAgICAgICAgICAgICAgICAgbG9hZFRvcG9sb2d5KCk7IC8vIFJlbG9hZCBkYXRhCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdFcnJldXIgc3luYzogJyArIGRhdGEuZXJyb3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdFcnJldXIgcsOpc2VhdSBwZW5kYW50IGxhIHN5bmMnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIE1BUCBFTkdJTkUgKExlYWZsZXQpIC0tLQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRNYXAoKSB7CiAgICAgICAgICAgIG1hcCA9IEwubWFwKCdtYXBDb250YWluZXInKS5zZXRWaWV3KFs0My42LCAxLjRdLCAxOCk7IC8vIERlZmF1bHQgVG91bG91c2UKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEdvb2dsZSBTYXRlbGxpdGUgTGF5ZXIKICAgICAgICAgICAgTC50aWxlTGF5ZXIoJ2h0dHA6Ly97c30uZ29vZ2xlLmNvbS92dC9seXJzPXMmeD17eH0meT17eX0mej17en0nLHsKICAgICAgICAgICAgICAgIG1heFpvb206IDIxLAogICAgICAgICAgICAgICAgc3ViZG9tYWluczpbJ210MCcsJ210MScsJ210MicsJ210MyddCiAgICAgICAgICAgIH0pLmFkZFRvKG1hcCk7CgogICAgICAgICAgICAvLyBBZGQgY2VudGVyIG1hcmtlciBmb3IgcmVmZXJlbmNlCiAgICAgICAgICAgIC8vIEwubWFya2VyKG1hcC5nZXRDZW50ZXIoKSkuYWRkVG8obWFwKS5iaW5kUG9wdXAoJ0NlbnRyZSBkZSBsYSB6b25lJyk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW5kZXJNYXBNb2R1bGVzKCkgewogICAgICAgICAgICAvLyBDbGVhciBleGlzdGluZwogICAgICAgICAgICBPYmplY3QudmFsdWVzKG1hcE1hcmtlcnMpLmZvckVhY2gobSA9PiBtYXAucmVtb3ZlTGF5ZXIobSkpOwogICAgICAgICAgICBtYXBNYXJrZXJzID0ge307CiAgICAgICAgICAgIAogICAgICAgICAgICBpZihNT0RVTEVTLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwoKICAgICAgICAgICAgY29uc3QgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoW10pOwogICAgICAgICAgICBsZXQgaGFzQm91bmRzID0gZmFsc2U7CgogICAgICAgICAgICBNT0RVTEVTLmZvckVhY2gobSA9PiB7CiAgICAgICAgICAgICAgICBpZighbS5nZW9fbGF0IHx8ICFtLmdlb19sb24pIHJldHVybjsgLy8gU2tpcCBpZiBubyBHUFMKCiAgICAgICAgICAgICAgICBjb25zdCBjb2xvciA9IGdldFN0YXR1c0NvbG9yKG0pOwogICAgICAgICAgICAgICAgLy8gTW9kdWxlIHNpemUgYXBwcm94OiAxbSB4IDEuNm0gLT4gfjAuMDAwMDEgZGVnCiAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9IDAuMDAwMDE1OyAKICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IDAuMDAwMDE7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IGJvdW5kc0FyciA9IFsKICAgICAgICAgICAgICAgICAgICBbbS5nZW9fbGF0LCBtLmdlb19sb25dLCAKICAgICAgICAgICAgICAgICAgICBbbS5nZW9fbGF0ICsgaGVpZ2h0LCBtLmdlb19sb24gKyB3aWR0aF0gCiAgICAgICAgICAgICAgICBdOwoKICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBMLnJlY3RhbmdsZShib3VuZHNBcnIsIHsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogY29sb3IsCiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAxLAogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjYsCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlIC8vIE5vdCBuYXRpdmUgaW4gTC5yZWN0YW5nbGUgd2l0aG91dCBwbHVnaW4/CiAgICAgICAgICAgICAgICB9KS5hZGRUbyhtYXApOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBBZGQgc2ltcGxlIHBvcHVwL3Rvb2x0aXAKICAgICAgICAgICAgICAgIHJlY3QuYmluZFRvb2x0aXAoYFMke20uc3RyaW5nX251bWJlcn06UCR7bS5wb3NpdGlvbl9pbl9zdHJpbmd9YCwgeyBwZXJtYW5lbnQ6IGZhbHNlLCBkaXJlY3Rpb246ICdjZW50ZXInIH0pOwoKICAgICAgICAgICAgICAgIC8vIE1ha2UgZHJhZ2dhYmxlIChNYW51YWwgaW1wbGVtZW50YXRpb24gZm9yIExlYWZsZXQgUmVjdHMpCiAgICAgICAgICAgICAgICBlbmFibGVEcmFnKHJlY3QsIG0pOwoKICAgICAgICAgICAgICAgIHJlY3Qub24oJ2NsaWNrJywgKCkgPT4gb3Blbkluc3BlY3RvcihtLmlkKSk7CiAgICAgICAgICAgICAgICBtYXBNYXJrZXJzW20uaWRdID0gcmVjdDsKICAgICAgICAgICAgICAgIGJvdW5kcy5leHRlbmQoYm91bmRzQXJyKTsKICAgICAgICAgICAgICAgIGhhc0JvdW5kcyA9IHRydWU7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYoaGFzQm91bmRzKSBtYXAuZml0Qm91bmRzKGJvdW5kcyk7CiAgICAgICAgfQoKICAgICAgICAvLyBMZWFmbGV0IFJlY3RhbmdsZSBEcmFnZ2luZyBMb2dpYyAoc2ltcGxpZmllZCkKICAgICAgICBmdW5jdGlvbiBlbmFibGVEcmFnKHJlY3QsIG1vZHVsZSkgewogICAgICAgICAgICBsZXQgc3RhcnRQb2ludCA9IG51bGw7CiAgICAgICAgICAgIGxldCBzdGFydEJvdW5kcyA9IG51bGw7CgogICAgICAgICAgICByZWN0Lm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBtYXAuZHJhZ2dpbmcuZGlzYWJsZSgpOwogICAgICAgICAgICAgICAgc3RhcnRQb2ludCA9IGUubGF0bG5nOwogICAgICAgICAgICAgICAgc3RhcnRCb3VuZHMgPSByZWN0LmdldEJvdW5kcygpOwogICAgICAgICAgICAgICAgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24oZSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgbWFwLm9uKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBpZihzdGFydFBvaW50KSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGF0RGlmZiA9IGUubGF0bG5nLmxhdCAtIHN0YXJ0UG9pbnQubGF0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxuZ0RpZmYgPSBlLmxhdGxuZy5sbmcgLSBzdGFydFBvaW50LmxuZzsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdTb3V0aFdlc3QgPSBMLmxhdExuZyhzdGFydEJvdW5kcy5nZXRTb3V0aFdlc3QoKS5sYXQgKyBsYXREaWZmLCBzdGFydEJvdW5kcy5nZXRTb3V0aFdlc3QoKS5sbmcgKyBsbmdEaWZmKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdOb3J0aEVhc3QgPSBMLmxhdExuZyhzdGFydEJvdW5kcy5nZXROb3J0aEVhc3QoKS5sYXQgKyBsYXREaWZmLCBzdGFydEJvdW5kcy5nZXROb3J0aEVhc3QoKS5sbmcgKyBsbmdEaWZmKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICByZWN0LnNldEJvdW5kcyhMLmxhdExuZ0JvdW5kcyhuZXdTb3V0aFdlc3QsIG5ld05vcnRoRWFzdCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIG1hcC5vbignbW91c2V1cCcsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGlmKHN0YXJ0UG9pbnQpIHsKICAgICAgICAgICAgICAgICAgICBtYXAuZHJhZ2dpbmcuZW5hYmxlKCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIE1vZHVsZSBEYXRhCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VudGVyID0gcmVjdC5nZXRCb3VuZHMoKS5nZXRTb3V0aFdlc3QoKTsgLy8gVXNlIFNXIGFzIG9yaWdpbiBmb3Igc2ltcGxpY2l0eQogICAgICAgICAgICAgICAgICAgIG1vZHVsZS5nZW9fbGF0ID0gY2VudGVyLmxhdDsKICAgICAgICAgICAgICAgICAgICBtb2R1bGUuZ2VvX2xvbiA9IGNlbnRlci5sbmc7CiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLl9kaXJ0eSA9IHRydWU7IC8vIE1hcmsgYXMgbW9kaWZpZWQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBTaG93ICJVbnNhdmVkIiBpbmRpY2F0b3IKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3luY1N0YXR1cycpLmlubmVyVGV4dCA9ICdNb2RpZmljYXRpb25zIG5vbiBzYXV2ZWdhcmTDqWVzJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3luY1N0YXR1cycpLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtZ3JheS00MDAnLCAnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N5bmNTdGF0dXMnKS5jbGFzc0xpc3QuYWRkKCd0ZXh0LW9yYW5nZS01MDAnKTsKCiAgICAgICAgICAgICAgICAgICAgc3RhcnRQb2ludCA9IG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIEFVVE8gUExBQ0UgTE9HSUMgLS0tCiAgICAgICAgZnVuY3Rpb24gYXV0b1BsYWNlTW9kdWxlcygpIHsKICAgICAgICAgICAgaWYoIWNvbmZpcm0oIlBsYWNlciBhdXRvbWF0aXF1ZW1lbnQgbGVzIG1vZHVsZXMgc2FucyBHUFMgYXUgY2VudHJlIGRlIGwnw6ljcmFuID8iKSkgcmV0dXJuOwoKICAgICAgICAgICAgY29uc3QgY2VudGVyID0gbWFwLmdldENlbnRlcigpOwogICAgICAgICAgICBjb25zdCBzdGFydExhdCA9IGNlbnRlci5sYXQ7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0TG9uID0gY2VudGVyLmxuZzsKICAgICAgICAgICAgY29uc3QgZ2FwID0gMC4wMDAwMjsgLy8gR2FwIGJldHdlZW4gbW9kdWxlcwoKICAgICAgICAgICAgbGV0IGN1cnJlbnRSb3cgPSAwOwogICAgICAgICAgICBsZXQgY3VycmVudENvbCA9IDA7CiAgICAgICAgICAgIGNvbnN0IG1heENvbHMgPSAyMDsgLy8gQnJlYWsgbGluZSBldmVyeSAyMCBtb2R1bGVzCgogICAgICAgICAgICBNT0RVTEVTLmZvckVhY2gobSA9PiB7CiAgICAgICAgICAgICAgICBpZighbS5nZW9fbGF0IHx8ICFtLmdlb19sb24pIHsKICAgICAgICAgICAgICAgICAgICBtLmdlb19sYXQgPSBzdGFydExhdCAtIChjdXJyZW50Um93ICogZ2FwICogMS41KTsgLy8gUm93cyBnbyBkb3duCiAgICAgICAgICAgICAgICAgICAgbS5nZW9fbG9uID0gc3RhcnRMb24gKyAoY3VycmVudENvbCAqIGdhcCk7IC8vIENvbHMgZ28gcmlnaHQKICAgICAgICAgICAgICAgICAgICBtLl9kaXJ0eSA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb2wrKzsKICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50Q29sID49IG1heENvbHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENvbCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSb3crKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcmVuZGVyTWFwTW9kdWxlcygpOwogICAgICAgICAgICBjaGVja1VucGxhY2VkTW9kdWxlcygpOwogICAgICAgICAgICBhbGVydCgiTW9kdWxlcyBwbGFjw6lzICEgVm91cyBwb3V2ZXogbWFpbnRlbmFudCBsZXMgZMOpcGxhY2VyLiBOJ291YmxpZXogcGFzIGRlIHNhdXZlZ2FyZGVyLiIpOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIFNBVkUgTE9HSUMgLS0tCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gc2F2ZUNoYW5nZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IG1vZGlmaWVkID0gTU9EVUxFUy5maWx0ZXIobSA9PiBtLl9kaXJ0eSk7CiAgICAgICAgICAgIGlmKG1vZGlmaWVkLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgYWxlcnQoIkF1Y3VuZSBtb2RpZmljYXRpb24gw6Agc2F1dmVnYXJkZXIuIik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgL2FwaS91bmlmaWVkL3RvcG9sb2d5LyR7Wk9ORV9JRH0vc2F2ZWAsIHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwKICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG1vZHVsZXM6IG1vZGlmaWVkIH0pCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICAgICAgICAgICAgICBpZihkYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgnU2F1dmVnYXJkZSByw6l1c3NpZSAhJyk7CiAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgZGlydHkgZmxhZ3MKICAgICAgICAgICAgICAgICAgICBtb2RpZmllZC5mb3JFYWNoKG0gPT4gZGVsZXRlIG0uX2RpcnR5KTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3luY1N0YXR1cycpLmlubmVyVGV4dCA9ICdTYXV2ZWdhcmTDqSc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N5bmNTdGF0dXMnKS5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktNDAwJyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N5bmNTdGF0dXMnKS5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LW9yYW5nZS01MDAnLCAnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdFcnJldXIgc2F1dmVnYXJkZTogJyArIGRhdGEuZXJyb3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCdFcnJldXIgcsOpc2VhdSBsb3JzIGRlIGxhIHNhdXZlZ2FyZGUnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIFVJIExPR0lDIC0tLQogICAgICAgIGZ1bmN0aW9uIGdldFN0YXR1c0NvbG9yKG0pIHsKICAgICAgICAgICAgLy8gQ09SUkVMQVRJT04gRU5HSU5FIChTaW1wbGUgVmVyc2lvbikKICAgICAgICAgICAgLy8gUHJpb3JpdHk6IFJlZCAoQ3JpdGljYWwpID4gT3JhbmdlIChXYXJuaW5nKSA+IEdyZWVuIChPSykgPiBHcmF5IChVbmtub3duKQogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgZGVmZWN0cyA9IFtdOwogICAgICAgICAgICBpZihtLnN0YXR1c19lbCAmJiBtLnN0YXR1c19lbCAhPT0gJ29rJykgZGVmZWN0cy5wdXNoKHsgdHlwZTogJ2VsJywgdmFsOiBtLnN0YXR1c19lbCB9KTsKICAgICAgICAgICAgaWYobS5zdGF0dXNfdmlzdWFsICYmIG0uc3RhdHVzX3Zpc3VhbCAhPT0gJ29rJykgZGVmZWN0cy5wdXNoKHsgdHlwZTogJ3ZpcycsIHZhbDogbS5zdGF0dXNfdmlzdWFsIH0pOwogICAgICAgICAgICBpZihtLnN0YXR1c19pdiAmJiBtLnN0YXR1c19pdiAhPT0gJ29rJykgZGVmZWN0cy5wdXNoKHsgdHlwZTogJ2l2JywgdmFsOiBtLnN0YXR1c19pdiB9KTsKCiAgICAgICAgICAgIC8vIDEuIENyaXRpY2FsCiAgICAgICAgICAgIGlmKGRlZmVjdHMuc29tZShkID0+IFsnZGVhZF9jZWxsJywgJ2hvdHNwb3QnLCAnYnlwYXNzX2Rpb2RlJywgJ2JyZWFrYWdlJywgJ2RlbGFtaW5hdGlvbicsICdzdHJpbmdfb3BlbiddLmluY2x1ZGVzKGQudmFsKSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnI2VmNDQ0NCc7IC8vIFJlZAogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIDIuIFdhcm5pbmcKICAgICAgICAgICAgaWYoZGVmZWN0cy5zb21lKGQgPT4gWydtaWNyb2NyYWNrcycsICdwaWQnLCAnZGlydHknLCAndmVnZXRhdGlvbicsICdsb3dfcG93ZXInXS5pbmNsdWRlcyhkLnZhbCkpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJyNmOTczMTYnOyAvLyBPcmFuZ2UKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyAzLiBJbmZvIC8gTWVhc3VyZWQKICAgICAgICAgICAgaWYoZGVmZWN0cy5zb21lKGQgPT4gWydtZWFzdXJlZCddLmluY2x1ZGVzKGQudmFsKSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnIzNiODJmNic7IC8vIEJsdWUKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyA0LiBPSwogICAgICAgICAgICBpZihtLnN0YXR1c19lbCA9PT0gJ29rJyB8fCBtLnN0YXR1c192aXN1YWwgPT09ICdvaycgfHwgbS5zdGF0dXNfaXYgPT09ICdvaycpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnIzIyYzU1ZSc7IC8vIEdyZWVuCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiAnIzk0YTNiOCc7IC8vIEdyYXkKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZU1pc3Npb25Db250ZXh0KCkgewogICAgICAgICAgICBjb25zdCBtaXNzaW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pc3Npb25TZWxlY3RvcicpLnZhbHVlOwogICAgICAgICAgICAvLyBGaWx0ZXIgVGFicwogICAgICAgICAgICBjb25zdCB0YWJzID0gewogICAgICAgICAgICAgICAgJ2VsJzogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uW29uY2xpY2s9InN3aXRjaFRhYihcXCdlbFxcJykiXScpLAogICAgICAgICAgICAgICAgJ3Zpc3VhbCc6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltvbmNsaWNrPSJzd2l0Y2hUYWIoXFwndmlzdWFsXFwnKSJdJyksCiAgICAgICAgICAgICAgICAnaXYnOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b25bb25jbGljaz0ic3dpdGNoVGFiKFxcJ2l2XFwnKSJdJyksCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBSZXNldCBhbGwKICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyh0YWJzKS5mb3JFYWNoKHQgPT4gdC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJyk7CgogICAgICAgICAgICBpZihtaXNzaW9uID09PSAnZWwnKSB7CiAgICAgICAgICAgICAgICB0YWJzWyd2aXN1YWwnXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgdGFic1snaXYnXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgc3dpdGNoVGFiKCdlbCcpOwogICAgICAgICAgICB9IGVsc2UgaWYgKG1pc3Npb24gPT09ICd2aXN1YWwnKSB7CiAgICAgICAgICAgICAgICB0YWJzWydlbCddLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICB0YWJzWydpdiddLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBzd2l0Y2hUYWIoJ3Zpc3VhbCcpOwogICAgICAgICAgICB9IGVsc2UgaWYgKG1pc3Npb24gPT09ICdpdicpIHsKICAgICAgICAgICAgICAgIHRhYnNbJ2VsJ10uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIHRhYnNbJ3Zpc3VhbCddLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBzd2l0Y2hUYWIoJ2l2Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFJlLXJlbmRlciBtYXAgdG8gcmVmbGVjdCBjb250ZXh0IGlmIHdlIHdhbnQgbWlzc2lvbi1zcGVjaWZpYyBjb2xvcmluZyAob3B0aW9uYWwpCiAgICAgICAgICAgIC8vIEZvciBub3csIHdlIGtlZXAgY29ycmVsYXRpb24gdmlldyBhcyBkZWZhdWx0CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW5kZXJNb2R1bGVMaXN0KCkgewogICAgICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZHVsZUxpc3QnKTsKICAgICAgICAgICAgbGlzdC5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIE1PRFVMRVMuc29ydCgoYSxiKSA9PiB7CiAgICAgICAgICAgICAgICBpZihhLnN0cmluZ19udW1iZXIgIT09IGIuc3RyaW5nX251bWJlcikgcmV0dXJuIGEuc3RyaW5nX251bWJlciAtIGIuc3RyaW5nX251bWJlcjsKICAgICAgICAgICAgICAgIHJldHVybiBhLnBvc2l0aW9uX2luX3N0cmluZyAtIGIucG9zaXRpb25faW5fc3RyaW5nOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIE1PRFVMRVMuZm9yRWFjaChtID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICBlbC5jbGFzc05hbWUgPSAnZmxleCBpdGVtcy1jZW50ZXIgcC0yIGhvdmVyOmJnLXB1cnBsZS01MCBjdXJzb3ItcG9pbnRlciByb3VuZGVkIHRleHQteHMnOwogICAgICAgICAgICAgICAgZWwub25jbGljayA9ICgpID0+IG9wZW5JbnNwZWN0b3IobS5pZCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEluZGljYXRldXIgc2kgbm9uIHBsYWPDqQogICAgICAgICAgICAgICAgY29uc3QgdW5wbGFjZWQgPSAoIW0uZ2VvX2xhdCB8fCAhbS5nZW9fbG9uKSA/ICc8c3BhbiB0aXRsZT0iTm9uIHBsYWPDqSBzdXIgY2FydGUiPvCfk43inZM8L3NwYW4+JyA6ICcnOwoKICAgICAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBtci0yIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogJHtnZXRTdGF0dXNDb2xvcihtKX0iPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LW1vbm8gZm9udC1ib2xkIHctMTYiPiR7bS5tb2R1bGVfaWRlbnRpZmllcn08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtZ3JheS00MDAgbXItMiI+UyR7bS5zdHJpbmdfbnVtYmVyfTpQJHttLnBvc2l0aW9uX2luX3N0cmluZ308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgJHt1bnBsYWNlZH0KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGVsKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdGF0cygpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvdGFsTW9kdWxlcycpLmlubmVyVGV4dCA9IE1PRFVMRVMubGVuZ3RoOwogICAgICAgICAgICBjb25zdCBzdHJpbmdzID0gbmV3IFNldChNT0RVTEVTLm1hcChtID0+IG0uc3RyaW5nX251bWJlcikpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG90YWxTdHJpbmdzJykuaW5uZXJUZXh0ID0gc3RyaW5ncy5zaXplOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIElOU1BFQ1RPUiBMT0dJQyAtLS0KICAgICAgICBmdW5jdGlvbiBvcGVuSW5zcGVjdG9yKG1vZHVsZUlkKSB7CiAgICAgICAgICAgIGNvbnN0IG0gPSBNT0RVTEVTLmZpbmQobW9kID0+IG1vZC5pZCA9PT0gbW9kdWxlSWQpOwogICAgICAgICAgICBpZighbSkgcmV0dXJuOwogICAgICAgICAgICBTRUxFQ1RFRF9NT0RVTEVfSUQgPSBtb2R1bGVJZDsKCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwZWN0b3JQYW5lbCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2Nsb3NlZCcpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUG9wdWxhdGUgRGF0YQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcE1vZHVsZUlkJykuaW5uZXJUZXh0ID0gbS5tb2R1bGVfaWRlbnRpZmllcjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3BTdHJpbmdJZCcpLmlubmVyVGV4dCA9IGBTdHJpbmcgJHttLnN0cmluZ19udW1iZXJ9IOKAoiBQb3MgJHttLnBvc2l0aW9uX2luX3N0cmluZ31gOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRUwgVGFiCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwRUxTdGF0dXMnKS52YWx1ZSA9IG0uc3RhdHVzX2VsIHx8ICdvayc7CiAgICAgICAgICAgIGlmKG0uZWxfaW1hZ2VfdXJsKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcEVMSW1hZ2UnKS5zcmMgPSBtLmVsX2ltYWdlX3VybDsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwRUxJbWFnZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3BFTFBsYWNlaG9sZGVyJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcEVMSW1hZ2UnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwRUxQbGFjZWhvbGRlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJbmZvIFRhYgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcExhdCcpLmlubmVyVGV4dCA9IG0uZ2VvX2xhdD8udG9GaXhlZCg2KSB8fCAnLSc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwTG9uJykuaW5uZXJUZXh0ID0gbS5nZW9fbG9uPy50b0ZpeGVkKDYpIHx8ICctJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3BTdHJpbmdJbnB1dCcpLnZhbHVlID0gbS5zdHJpbmdfbnVtYmVyOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zcFBvc0lucHV0JykudmFsdWUgPSBtLnBvc2l0aW9uX2luX3N0cmluZzsKCiAgICAgICAgICAgIC8vIFZpc3VhbCBUYWIKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3BWaXN1YWxTdGF0dXMnKS52YWx1ZSA9IG0uc3RhdHVzX3Zpc3VhbCB8fCAnb2snOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gSVYgVGFiCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwSVZTdGF0dXMnKS52YWx1ZSA9IG0uc3RhdHVzX2l2IHx8ICdvayc7CgogICAgICAgICAgICAvLyBIaWdobGlnaHQgaW4gTGlzdAogICAgICAgICAgICAvLyBUT0RPCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbG9zZUluc3BlY3RvcigpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3BlY3RvclBhbmVsJykuY2xhc3NMaXN0LmFkZCgnY2xvc2VkJyk7CiAgICAgICAgICAgIFNFTEVDVEVEX01PRFVMRV9JRCA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzd2l0Y2hUYWIodGFiKSB7CiAgICAgICAgICAgIC8vIEhpZGUgYWxsIGNvbnRlbnRzCiAgICAgICAgICAgIFsnZWwnLCAndmlzdWFsJywgJ2l2JywgJ2luZm8nXS5mb3JFYWNoKHQgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHRhYi0ke3R9YCkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyBTaG93IHNlbGVjdGVkCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGB0YWItJHt0YWJ9YCkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBVcGRhdGUgYnV0dG9ucyBzdHlsZSAoc2ltcGxlIHZlcnNpb24pCiAgICAgICAgICAgIC8vIEluIHJlYWwgYXBwLCB0b2dnbGUgY2xhc3NlcwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlTW9kdWxlU3RhdHVzKHR5cGUpIHsKICAgICAgICAgICAgaWYoIVNFTEVDVEVEX01PRFVMRV9JRCkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBtID0gTU9EVUxFUy5maW5kKG1vZCA9PiBtb2QuaWQgPT09IFNFTEVDVEVEX01PRFVMRV9JRCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZih0eXBlID09PSAnZWwnKSBtLnN0YXR1c19lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwRUxTdGF0dXMnKS52YWx1ZTsKICAgICAgICAgICAgaWYodHlwZSA9PT0gJ3Zpc3VhbCcpIG0uc3RhdHVzX3Zpc3VhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnNwVmlzdWFsU3RhdHVzJykudmFsdWU7CiAgICAgICAgICAgIGlmKHR5cGUgPT09ICdpdicpIG0uc3RhdHVzX2l2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luc3BJVlN0YXR1cycpLnZhbHVlOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUmUtcmVuZGVyIG1hcCBtYXJrZXIgY29sb3IgaW1tZWRpYXRlbHkKICAgICAgICAgICAgaWYobWFwTWFya2Vyc1ttLmlkXSkgewogICAgICAgICAgICAgICAgbWFwTWFya2Vyc1ttLmlkXS5zZXRTdHlsZSh7IGNvbG9yOiBnZXRTdGF0dXNDb2xvcihtKSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZW5kZXJNb2R1bGVMaXN0KCk7CiAgICAgICAgfQoKICAgICAgICBhc3luYyBmdW5jdGlvbiBzYXZlSW5zcGVjdG9yKCkgewogICAgICAgICAgICAvLyBIZXJlIHdlIHdvdWxkIGNhbGwgQVBJIHRvIHNhdmUgc3BlY2lmaWMgbW9kdWxlIGNoYW5nZXMKICAgICAgICAgICAgLy8gRm9yIG5vdywgd2UgcmVseSBvbiB0aGUgZ2xvYmFsIFNhdmUgYnV0dG9uCiAgICAgICAgICAgIGFsZXJ0KCdNb2RpZmljYXRpb25zIGFwcGxpcXXDqWVzIGxvY2FsZW1lbnQuIENsaXF1ZXogc3VyICJTYXV2ZWdhcmRlciIgZW4gaGF1dCBwb3VyIHBlcnNpc3Rlci4nKTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBWSUVXIFNXSVRDSElORyAtLS0KICAgICAgICBmdW5jdGlvbiBzd2l0Y2hWaWV3KG1vZGUpIHsKICAgICAgICAgICAgVklFV19NT0RFID0gbW9kZTsKICAgICAgICAgICAgaWYobW9kZSA9PT0gJ21hcCcpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXBDb250YWluZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY2hlbWF0aWNDb250YWluZXInKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5WaWV3TWFwJykuY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUnLCAnc2hhZG93LXNtJywgJ3RleHQtcHVycGxlLTcwMCcpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0blZpZXdTY2hlbWF0aWMnKS5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZScsICdzaGFkb3ctc20nLCAndGV4dC1wdXJwbGUtNzAwJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwQ29udGFpbmVyJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NoZW1hdGljQ29udGFpbmVyJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuVmlld1NjaGVtYXRpYycpLmNsYXNzTGlzdC5hZGQoJ2JnLXdoaXRlJywgJ3NoYWRvdy1zbScsICd0ZXh0LXB1cnBsZS03MDAnKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5WaWV3TWFwJykuY2xhc3NMaXN0LnJlbW92ZSgnYmctd2hpdGUnLCAnc2hhZG93LXNtJywgJ3RleHQtcHVycGxlLTcwMCcpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=";
